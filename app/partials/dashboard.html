<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="title-text navbar-back" onclick="history.back();">&lt;</div>
    <div class="navbar-brand title-text">
      Scratch Apps
    </div>
</div>


<div class="container page-has-navbar">

	<!-- {{friendsApps}} -->
	<!-- {{userApps.display}} -->

	<!-- Display navigation buttons -->
	<div style="text-align: center;">

		<!-- User and friends apps button -->
		<a href="{{ '#/user/' + userID }}"><button type="submit" class="btn btn-success dashboard-top-buttons">{{userID}}</button></a><a ng-repeat="Friend in friendsApps.display" href="{{ '#/user/' + Friend.username }}"><button type="submit" class="btn btn-info dashboard-top-buttons">{{Friend.username}}</button></a>

		<!-- <button type="submit" class="col-xs-6 btn btn-warning dashboard-top-buttons">Friend #2</button>
		<button type="submit" class="col-xs-6 btn btn-danger dashboard-top-buttons">Friend #3</button>
		<button type="submit" class="col-xs-6 btn btn-primary dashboard-top-buttons">Friend #4</button> -->

	</div>

	<script>

	    // Calculate the height and width which can be used
	    var WorkHeight = $('body').height();
	    var WorkWidth = $('body').width() - 15 * 2;

	    // Get width of margins as an integer
	    var marginWidth = parseInt($('.dashboard-top-buttons').css('margin-left').replace('px', '')) +
	                      parseInt($('.dashboard-top-buttons').css('margin-right').replace('px', '')) + 10;
	    
	    // Calculate the size for the dashboard buttons
	    var ButtonWidth = 150;
	    for (var count = 0; count < 5; count ++)
	    {
	    	if (WorkWidth > count * 130 && WorkWidth <= (count+1) * 130)
	    	{
	    		ButtonWidth = ((WorkWidth - count * marginWidth) / count);
	    	}
	    }
	    
	    // Apply sizing to navigation top buttons
	    $('.dashboard-top-buttons').css('width', ButtonWidth.toString() + 'px');

	</script>

	<!-- Available apps -->
	<div class="dashboard-available-apps">

		<!-- User apps -->
		<table class="dashboard-app-group-table">

			<!-- Title row -->
			<tr> <td>
				<div class="dashboard-app-group-title"> My Apps </div>
				<a href="{{ '#/user/' + userID }}"><div class="dashboard-app-group-more"> See More </div></a>
			</td> </tr>

			<!-- App list row -->
			<tr> <td class="dashboard-app-group-list">

				<div class="dashboard-app-block" ng-repeat="DisplayItem in userApps.display" ng-click="NavigateToProject(DisplayItem);">
					<img src="http://cdn2.scratch.mit.edu/get_image/project/{{DisplayItem.projectId}}_192x192.png" class="dashboard-app-block-icon"></img>
					<br/><span class="dashboard-app-block-title">{{DisplayItem.title}}</span>
					<br/><span class="dashboard-app-block-play" ng-click="NavigateToPlayer(DisplayItem);">PLAY</span>
				</div>

			</td> </tr>

		</table>

		<!-- Friend apps -->
		<table class="dashboard-app-group-table" ng-repeat="Friend in friendsApps.display" ng-show="Friend.projects.length > 0">

			<!-- Title row -->
			<tr> <td>
				<div class="dashboard-app-group-title"> {{Friend.username}} </div>
				<a href="{{ '#/user/' + Friend.username }}"><div class="dashboard-app-group-more"> See More </div></a>
			</td> </tr>

			<!-- App list row -->
			<tr> <td class="dashboard-app-group-list">

				<div class="dashboard-app-block" ng-repeat="DisplayItem in Friend.projects" ng-click="NavigateToProject(DisplayItem);">
					<img src="http://cdn2.scratch.mit.edu/get_image/project/{{DisplayItem.projectId}}_192x192.png" class="dashboard-app-block-icon"></img>
					<br/>{{DisplayItem.title}}
					<br/><span class="dashboard-app-block-play" ng-click="NavigateToPlayer(DisplayItem);">PLAY</span>
				</div>

			</td> </tr>

		</table>

	</div>

	<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background-color: #e5e5e5;" ng-hide="finishedLoading">

		<!-- Wills loader (may return to this one) -->
		<!-- <div id="loader" class="spinner" style="width: 100%; height: 100%; text-align: center;"></div> -->

		<!-- Use div as text message may be added below loader -->
		<div id="dashboardloader">
			<img src="media/loading_spinner.gif" style="width: 48px; height: 48px; text-align: center; margin: auto;"></img>
		</div>

	</div>

</div>