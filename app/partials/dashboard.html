<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="title-text navbar-back" onclick="history.back();">&lt;</div>
    <div class="navbar-brand title-text">
      Scratch Apps
    </div>
</div>

<div id="test" class="container page-has-navbar" ng-hide="error">

	<!-- {{friendsApps}} -->
	<!-- {{userApps.display}} -->


	<script id='code_1'>
		$(function() {			
			//Enable swiping...
			$("#test").swipe( {

				swipeLeft: LeftSwipe,
				swipeRight: RightSwipe,
				//swipeUp: UpSwipe,
				//swipeDown: DownSwipe,

				allowPageScroll: 'auto'

			});

			// Directional swiping functions
			function LeftSwipe(event, direction, distance, duration, fingerCount, fingerData)
			{
			}

			// Directional swiping functions
			function RightSwipe(event, direction, distance, duration, fingerCount, fingerData)
			{
			}

			// Directional swiping functions
			function UpSwipe(event, direction, distance, duration, fingerCount, fingerData)
			{
			}

			// Directional swiping functions
			function DownSwipe(event, direction, distance, duration, fingerCount, fingerData)
			{
			}

		});
	</script>
			

	<!-- Display navigation buttons -->
	<div style="text-align: center;">

		<!-- User and friends apps button -->
		<a href="{{ '#/user/' + userID }}"><button type="submit" class="btn btn-success dashboard-top-buttons">{{userID}}</button></a><a ng-repeat="Friend in friendsApps.display" href="{{ '#/user/' + Friend.username }}"><button type="submit" class="btn btn-info dashboard-top-buttons">{{Friend.username}}</button></a>

		<!-- <button type="submit" class="col-xs-6 btn btn-warning dashboard-top-buttons">Friend #2</button>
		<button type="submit" class="col-xs-6 btn btn-danger dashboard-top-buttons">Friend #3</button>
		<button type="submit" class="col-xs-6 btn btn-primary dashboard-top-buttons">Friend #4</button> -->

	</div>

	<script>

	    // Calculate the height and width which can be used
	    var WorkHeight = $('body').height();
	    var WorkWidth = $('body').width() - 15 * 2;

	    // Get width of margins as an integer
	    var marginWidth = parseInt($('.dashboard-top-buttons').css('margin-left').replace('px', '')) +
	                      parseInt($('.dashboard-top-buttons').css('margin-right').replace('px', '')) + 10;
	    
	    // Calculate the size for the dashboard buttons
	    var ButtonWidth = 150;
	    for (var count = 0; count < 5; count ++)
	    {
	    	if (WorkWidth > count * 130 && WorkWidth <= (count+1) * 130)
	    	{
	    		ButtonWidth = ((WorkWidth - count * marginWidth) / count);
	    	}
	    }

	    // Apply sizing to navigation top buttons
	    $('.dashboard-top-buttons').css('width', ButtonWidth.toString() + 'px');

	</script>

	<!-- Available apps -->
	<div class="dashboard-available-apps">

		<!-- User apps -->
		<div ng-show="userApps.all.length > 0">

			<!-- Title -->
			<div class="dashboard-app-group-title"> My Apps </div>
			<a href="{{ '#/user/' + userID }}"><div class="dashboard-app-group-more"> See More </div></a>

			<!-- Clear float settings -->
			<div style="clear:both;"></div>

			<!-- App list row -->
			<div class="dashboard-app-group-list" style="overflow: hidden; max-height: 200px;">
				<div class="dashboard-app-block" style="display: inline-block; vertical-align: top;" ng-repeat="DisplayItem in userApps.all" ng-click="NavigateToProject(DisplayItem);">
					<img ng-src="http://cdn2.scratch.mit.edu/get_image/project/{{DisplayItem.projectId}}_192x192.png" class="dashboard-app-block-icon"></img>
					<br/><span class="dashboard-app-block-title">{{DisplayItem.title}}</span>
					<br/><span class="dashboard-app-block-play" ng-click="NavigateToPlayer(DisplayItem);">PLAY</span>
				</div>
			</div>

		</div>

		<!-- Friend apps -->
		<div ng-repeat="Friend in friendsApps.all" ng-show="Friend.projects.length > 0">

			<!-- Title -->
			<div class="dashboard-app-group-title"> {{Friend.username}} </div>
			<a href="{{ '#/user/' + Friend.username }}"><div class="dashboard-app-group-more"> See More </div></a>

			<!-- Clear float settings -->
			<div style="clear:both;"></div>

			<!-- App list row -->
			<div class="dashboard-app-group-list" style="overflow: hidden; vertical-align: top;">
				<div class="dashboard-app-block" style="display: inline-block; vertical-align: top;" ng-repeat="DisplayItem in Friend.projects" ng-click="NavigateToProject(DisplayItem);">
					<img ng-src="http://cdn2.scratch.mit.edu/get_image/project/{{DisplayItem.projectId}}_192x192.png" class="dashboard-app-block-icon"></img>
					<br/><span class="dashboard-app-block-title" style="display: block; text-overflow: ellipsis; white-space: nowrap; word-break: normal; overflow: hidden; max-height: 50px;">{{DisplayItem.title}}</span>
					<br/><span class="dashboard-app-block-play" ng-click="NavigateToPlayer(DisplayItem);">PLAY</span>
				</div>
			</div>

		</div>

	</div>

	<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background-color: #e5e5e5;" ng-hide="finishedLoading">

		<!-- Wills loader (may return to this one) -->
		<!-- <div id="loader" class="spinner" style="width: 100%; height: 100%; text-align: center;"></div> -->

		<!-- Use div as text message may be added below loader -->
		<div id="dashboardloader">
			<img src="media/loading_spinner.gif" style="width: 48px; height: 48px; text-align: center; margin: auto;"></img>
		</div>

	</div>



</div>
<div class="container alert alert-danger page-has-navbar" ng-show="error"><b>Oh dear.</b> An error occurred. Perhaps you entered in the wrong username? The error code is: {{error.error}}.</div>

<div class="container alert alert-danger page-has-navbar" ng-show="userHasNoProjects && userHasNoFollowers">Your dashboard is empty -- please publish some projects or add some followers!</div>
<div class="container alert alert-info page-has-navbar" ng-show="userHasNoProjects && !userHasNoFollowers">You don't seem to have any published projects. Why don't you make this dashboard better by adding some?</div>
<div class="container alert alert-info page-has-navbar" ng-show="userHasNoFollowers && !userHasNoProjects">You don't seem to have any followers. Why don't you make this dashboard better by adding some?</div>
